## 장바구니 페이지 수량 조절 기능
- 상품 1개 조회 페이지에서 만들었던 장바구니 버튼을 그대로 활용해보기. 해당 버튼의 클래스를 통해 cart.js와 연동을 시켜놨기 때문.

```python
{% for item in items %}
<tr>
 ...
  <th>
      <button data-post="{{item.product.id}}" data-action="add" class="cart-update" onClick="window.location.href=window.location.href">+</button>
       {{ item.quantity }}
      <button data-post="{{item.product.id}}" data-action="remove" class="cart-update" onClick="window.location.href=window.location.href">-</button>
  </th>
...
</tr>
{% endfor %}
```

- cart.js에 연동된 클래스인 class="cart-update"를 button에 추가. 
- +버튼은 data-action이 "add"로 / -버튼은 data-action을 "remove" 로 설정
- 여기서 item은 orderitem 모델 데이터이니까 product의 id로 data-post 설정
- 클릭하자마자 페이지를 새로고침 하기 위해 button에 onClick="window.location.href=window.location.href" 추가
  - window.location.href은 브라우저의 현재 URL 위치를 알려주는 속성이다. 속성 값을 변경하면 페이지가 새로고침 되는데, 변경 값을 그대로 현재 URL로 설정하여 클릭할때마다 페이지가 새로고침 될 수 있도록 한 코드이다.

```python
# 장바구니 추가 기능
def updatedItem(request, post_id):
...
if action == 'add':
   orderItem.quantity = (orderItem.quantity + 1)    # 만약 button을 누를 때 action이 add이면 orderItem 변수에 있는 db정보의 quantity를 1 증가 시키기.
elif action == 'remove':
   orderItem.quantity = (orderItem.quantity - 1)    # 만약 button를 누를 때 action이 remove이면 orderItem 변수에 있는 db정보의 quantity를 1 감소 시키기.

orderItem.save()      # 위에서 변경된 내용 저장.

if orderItem.quantity <= 0:         # 만약 장바구니로 추가된 상품의 수량이 0과 같거나 작으면 해당 데이터 삭제
   orderItem.delete()
```

- views.py의 updatedItem 함수의 일부분인데, action이 add / remove일 때마다 다르게 설정해서 oderItem 모델의 저장된 장바구니 상품의 quantity를 조절할 수 있는 것이다.
- 수량이 0이 되면 아예 orderItem DB에서 삭제하게 된다.


## 결제 페이지에서 결제 버튼을 눌렀을 때 Shipping Address 모델에 데이터 추가하기

