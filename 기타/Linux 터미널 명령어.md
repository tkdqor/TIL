# Linux

## Ubuntu

- 먼저 리눅스는 서버 컴퓨터의 운영체제(OS)로서, 클라이언트의 요청에 응답한다.
  리눅스는 무료로 배포되었기 때문에 사람들이 발전시켰고, 리눅스의 유명한 버전 중 하나가 바로 우분투(Ubuntu)이다.
  
  
## command 라인을 배워야 하는 이유
- 백엔드 개발자라면 터미널 윈도우를 이용해서 다른 원격에 있는 서버에 접속한다든지 문제있는 버그를 디버깅하거나 자동화를 위해 스크립트를 작성하는 일이 빈번 할 것이다.


## 개발자라면 알아야 할 Shell 명령어 15가지
- Unix에는 Bourne shell, Bash, fish, zsh 이렇게 다양한 shell들이 있다. Unix shell 명령어를 공부하면 Unix 계열의 Linux나 Mac OS에서도 shell command를 사용하는데 편리하다. 또한 요즘에는 윈도우 안에 Linux가 포함되어져 있기 때문에(WSL) 사용가능하다. 

- Mac OS에서 제공하는 기본 터미널이 아닌 iTerm를 이용해보기.


### Manual
- Shell 커맨드에 대해서 자세히 알아보기 전에 중요한 명령어가 있다.
```terminal
man
```

- man은 Manual 또는 users Manual의 약자인데, 이 명령어가 무엇인지 모르겠거나 어떤 옵션들을 함께 써야하는지 모르겠다 할 때, man 명령어를 이용해서 자세히 알아볼 수 있다. man man 이렇게 입력하면 man 명령어에 대한 설명이 나온다. 해당 화면에서 나가고 싶을 때는 q를 입력하면 된다.

```terminal
clear
```

- 그 다음은 clear 명령어이다. 터미널에 있는 모든 텍스트를 깔끔하게 청소해주는 명령어다. man clear로 clear에 대한 내용도 확인해보자.

* * *

### Navigating file system
- 이번에는 파일탐색기처럼 터미널에서 폴더와 파일들을 탐색할 수 있게 해주는 명령어들을 알아보자.

```terminal
pwd
```

- 첫번째로는 지금 내가 어떤 경로에 있는지 알아볼 수 있는 pwd이다. Print Working Directory의 약자로 내가 현재 있는 곳의 전체 경로를 print 해주는 명령어이다. server에서 로그를 남기거나 스크립트를 작성할 때도 많이 사용한다.

```terminal
open .
ls
ls 과제폴더
ls  -l
ls -a
ls -la
```

- 두번째로는 ls 명령어이다. ls 명령어는 현재 디렉터리 안에 있는 폴더와 파일들을 출력해준다. list의 약자이다. 또한, 특정한 폴더 안을 보고 싶을때는, ls 하고 폴더 이름을 적어주면 된다.
- 또한, 파일에 대해서 자세한 내용을 보고 싶다면 ls -l 이렇게 long 포맷이라는 옵션을 이용하면, 파일의 이름과 사이즈, 언제 수정되었는지 그리고 파일을 소유하고 있는 사람의 오너도 확인해볼 수 있다.
- 그리고 UI상에서는 보이지 않는 숨겨져 있는 파일이나 디렉터리도 보고 싶다면, ls -a 즉, all 옵션을 이용하면 숨겨진 파일들도 다 볼 수 있다.
  - 그리고 long 포맷과 all 옵션을 함께 사용하고 싶다면, ls -la를 이용해서 사용할 수 있다.

- open . 을 입력하면 현재 위치한 디렉터리 폴더를, 파일탐색기를 실제로 켜서 보여준다. 여기서 점은 현재 경로를 의미한다.

```terminal
cd 디렉터리 이름
cd ..
cd ~
cd -
```

- cd는 change directory의 약자로 현재 디렉터리 위치를 변경할 수 있다. 그리고 cd .. 은 상위 경로를 의미한다. 
- 또한, cd ~는 현재 설정된 사용자의 home 디렉터리로, 최상위 경로로 이동하게 된다.
- 마지막으로 cd -를 입력하면, 지금 위치로 오기 전에 이전 경로로 이동하게 된다.

```terminal
find . -type file -name "*.txt"
find . -type file -name "*.json"
find . -type directory -name "*2"
```

- find 명령어는 파일 시스템에서 특정한 파일이나 디렉터리를 찾을 때 유용하게 사용할 수 있다. 내가 현재 있는 경로와 그 하위에 있는 모든 폴더에 한해서, 모든 텍스트 파일을 찾고 싶다면 -> find 다음 현재 경로에서부터 시작해서 type은 file이고 이름은 .txt 확장자로 끝나는 모든 파일들에 대해서 찾고 싶을 때 find . -type file -name "*.txt" 이렇게 사용한다. 
  - 만약, 확장자가 json으로 끝나는 파일들을 찾고 싶다면 두번째 명령어를 입력해보자.

- 그리고, 파일이 아니라 디렉터리, 폴더를 찾고 싶다면 find . -type directory -name "*2" 이렇게 해주면 된다. 이름은 2로 끝나는 폴더이다.

```terminal
which python3
which code
```

- 그 다음 명령어는 which이다. which는 내가 지금 실행하고자 하는 프로그램이 어디에 설치되어져 있는지, 어디에 설정되어 있는지 경로를 확인할 때 사용할 수 있다. 그래서 which python3 하게 되면 python3의 실행 경로를 확인해볼 수 있다. which code는 VS code의 경로를 확인할 수 있다.

* * *

### Create and manage files
- 이제는 파일을 만들고 경로를 만들고, 파일을 복사 / 이동 / 삭제할 수 있는 명령어를 익혀보자. 또한 모든 파일에 한해서 키워드로 검색하는 방법도 있다.
- UI 탐색기가 아니라, 터미널을 사용하는 가장 큰 장점중에 하나가 마우스를 사용하지 않고 빠르게 일들을 처리하고 확인할 수 있다는 점이 장점이라고 볼 수 있다.

```terminal
touch new_file1.txt
```

- touch 다음에 원하는 파일 이름을 작성하게 되면 -> 새로운 파일을 만들 수 있다. 
- 위와 같이 txt 파일을 만들고 그 내부에 글들을 작성해보자.
  - touch는 파일이 존재하지 않는다면 파일을 만들고, 기존에 존재하는 파일을 touch하게 되면 그 파일에 수정한 날짜가 touch를 한 시점으로 업데이트가 된다.

```terminal
cat new_file1.txt
cat new_file1.txt new_file2.txt
```

- cat 명령어를 이용해서 파일 이름을 입력하면, 파일안에 있는 내용들을 출력해서 볼 수 있다.
- cat 다음에 파일명 1개를 작성해도 되고, cat 다음에 여러개의 파일이름을 작성하면 -> 모든 파일들의 콘텐츠를 한 번에 확인할 수 있다.


```terminal
echo "hello world"
echo "hello world" > new_file3.txt
echo "Hello Brave New World" > new_file3.txt
echo "Goodbye world" >> new_file3.txt
```

- echo 명령어 다음에 ".." 이렇게 문자열을 입력하면, 문자열을 터미널에 메아리 치듯이 출력해준다.
- echo 다음 문자열을 입력하고, 오른쪽 화살표를 입력한 다음 파일명을 작성하게 되면 -> echo 옆에 있는 문자열을 새로운 파일을 만들면서 content로 직접 넣어줄 수 있다.
  - 여기서 한 가지 중요한 포인트는, 오른쪽 화살표 하나만을 이용하면 입력한 문자열을 그대로 새롭게 덮어씌워주는 기능을 하게된다. 즉, 이전에 작성한 내용들이 삭제되고 새로운 문자열이 생성된다.
  - 만약 나는 덮어씌우지 않고 뒤에다가 문자열을 추가하고 싶다면 -> 오른쪽 화살표를 2개 이용해서 파일명을 적어주면 된다.


```terminal
mkdir 원하는이름
mkdir -p div/div2/div3
```

- mkdir은 경로를 만드는 명령어로 make directory의 약자로 디렉터리를 만들 수 있는 명령어이다. mkdir 다음에 원하는 이름을 작성하면, 현재 있는 경로에서 새로운 디렉터리를 생성해준다.
- 만약, 한번에 디렉터리 여러 개를 생성해서 경로를 만들고 싶다면 -> -p 옵션을 이용해서 원하는 경로를 전부 적으면 중간중간 필요한 디렉터리가 자동으로 생성된다.

* * *
- 이제, 파일을 관리할 수 있는 3가지 명령어에 대해서 알아보자.

```terminal
cp file1.txt dir1/
```

- 먼저 cp는 copy의 약자로 cp 다음에 원하는 파일명과 / 원하는 경로를 작성해주면 원래 있었던 해당 파일을 복사해서 지정한 경로로 위치해 준다.


```terminal
mv file2.txt dir1/
mv file3.txt file2.txt
```

- 만약, 복사하지 않고 이동만 시키고 싶다면 move의 약자인 mv를 사용한다. mv 다음에 원하는 파일과 어디로 이동하고 싶은지 경로를 작성해주면 된다.
- 그리고 cp나 mv 모두 새로운 파일로 이동하거나 복사하고 싶다면(?) mv 원하는 파일 대상 파일  이렇게 작성할 수 있다.

```terminal
rm file1.txt
rm -r dir2
```

- rm은 remove의 약자로 파일을 삭제할 때 rm 다음에 원하는 파일 이름을 작성하면 해당 파일을 삭제할 수도 있다.
- rm dir2 처럼, 디렉터리를 삭제하려고 할 때는 경고 메세지가 나온다. 그래서 -r 옵션을 사용해서 삭제해야 한다.


```terminal
grep "world" *.txt
grep -n "world" *.txt
grep -ni "world" *.txt
grep -nir "world" .
```

- grep이라는 명령어는, Global regular expression print의 약자로 우리가 코딩을 할 때 한 파일 안에서 키워드로 검색을 하거나 또는 프로젝트 전체에 한해서 키워드로 검색할 경우가 많이 있을 것이다. 이 때 터미널에서 동일하게 할 수 있는 명령어가 바로 grep이다. 
  - grep 다음에 검색하고자 하는 키워드를 작성하고 특정한 파일을 대상으로 찾고 싶다면, 확장자를 명시해주면 된다.
  - 또한, 검색했을 때 해당 내용이 정확히 몇번째 줄에 있는지 확인하고 싶다면, -n 옵션을 사용해서 확인해볼 수 있다.
  - 그리고, 대소문자 상관없이 다 검색하고 싶다면, -i 옵션을 사용하면 된다.
  - 지금 현재 있는 경로에서, 보통은 현재 프로젝트의 최상위 경로에서 특정 문자를 전부 다 검색하고 싶을 때는 -r 옵션을 추가로 주면 된다. 다만 ni옵션을 같이 주어서 몇번째 줄인지 / 그리고 대소문자 상관없이 검색하고 검색하고자 하는 단어 다음에 현재 경로를 뜻하는 .을 입력해주면 된다. 이렇게 하면, 현재 경로와 그 하위에 있는 모든 서브 폴더에 한해서 해당 문자를 검색할 수 있다.


* * *

### Work with environment variables
- 마지막 카테고리로는 환경변수 설정하기이다. 
- **환경변수라는 것은, 내 컴퓨터에서 특정한 키워드가 어떠한 일을 하거나 경로를 저장할 수 있도록 만들고 그렇게 정의해놓은 변수들을 의미한다.**

```terminal
export MY_DIR="dir1"
env
cd $MY_DIR
unset MY_DIR
```

- 유닉스에서는 export라는 명령어를 이용해서 환경변수를 설정할 수 있다. export 다음에 환경변수를 만들어줄 수 있고 보통 대문자로 만들어준다. 그리고 단어 사이사이에 구분자를 넣어줄 때는 _ 이렇게 밑의 대쉬를 이용하고 있다. 위의 예시로 export 다음에 MY_DIR(나의 디렉터리)를 써주고 "dir1" 즉, export MY_DIR="dir1" 이렇게 입력하면 -> MY_DIR은 dir1이다 라고 설정해준 것이다.
- 이렇게 export를 이용하면, 환경변수 즉, 내 컴퓨터 상에 이러한 변수를 설정할 수 있는 것이다.
  - 설정된 모든 환경변수를 보고싶다면, env 명령어를 입력하면 -> 모든 환경변수를 출력해볼 수 있다. ex) 내 맥북에서 env를 입력해보면 -> PATH라는 변수가 python 경로로 정의되어 있다는 것을 확인해볼 수 있다.

- 위에서처럼 MY_DIR이라는 변수를 정의했다면 이제 -> 터미널이나 내 컴퓨터에서 이 MY_DIR이라는 환경변수를 이용하여 dir1를 나타낼 수 있다. 우리가 프로그래밍을 할 때, 변수를 설정하는 것과 똑같다고 보면 된다. 
  - 그래서 터미널에서 cd 다음에 dir1이라고 명시해도 되지만, 지금은 환경변수로 저장을 해놨기 때문에 환경변수를 사용할 때는 -> 달러 싸인 다음에 환경변수 이름을 작성하면 바로 dir1으로 이동할 수 있게 된다.

- 환경변수를 제거하고 싶다면, unset MY_DIR 이렇게 unset 명령어를 이용해서 지정된 환경변수를 삭제할 수 있다.

* * *

### Vi, Vim
- 많은 사람들이 터미널을 사용하면서 수정모드에 들어온 건 알겠는데, 도대체 여기서 어떻게 나가는지 힘들어하는 사람들이 많다.
- **Vi 또는 Vim은 터미널에서 많이 이용되는 텍스트 에디터이다.** Vim은 터미널에서 뿐만 아니라, VS Code에서 코딩을 할 때도 유용하게 사용할 수 있다.

- 터미널에서 Git를 사용하거나, 어떤 특정한 파일을 수정할 때 우리가 알게 모르게 Vim를 이용하게 된다. 이 Vim에서 파일을 수정할 때, 어떻게 다시 터미널로 돌아가는지 알아보자.

```terminal
vim file1.txt
```

- 터미널에서 vim 다음에 원하는 파일명을 작성하면 -> 새로운 파일을 만들 수 있고 또한 터미널 화면이 vim 에디터 모드로 들어가게 된다.
<img width="480" alt="image" src="https://user-images.githubusercontent.com/95380638/158926809-7f679a40-1125-4d91-a049-17798eb0cf07.png">

- **이렇게 vim 에디터에 들어왔을 때 어떤 파일을 수정하고 싶다면 -> i를 입력해야 한다.** i라는 insert 명령어를 클릭한 다음에, 글자를 수정하거나 삭제할 수 있다. 
  - 글자를 추가로 입력해서 이제 insert 모드에서 나가려면 -> 키보드 제일 왼쪽에 있는 esc를 누른다. 그리고 :콜론을 누르고 원하는 명령어를 작성하면 된다.
  - :w는 방금 수정한 내용을 꼭 저장해달라는 write changes 의미이다.
  - :q는 꺼달라는 quit의 의미이다. 그래서 파일을 수정하다가 이 수정한 내용은 무시하고 그냥 끄고 싶을 때는 :q를 이용하면 된다.
  - 만약 저장하면서 종료하고 싶다면 -> :wq 명령어를 쓰면 된다.

```terminal
vim file1.txt
```

- 위와 똑같이 vim 다음에 기존에 존재하는 파일명을 입력하면, 터미널 화면이 해당 파일을 수정할 수 있는 화면으로 바뀌게 된다. 
<img width="471" alt="image" src="https://user-images.githubusercontent.com/95380638/158928284-35e797d5-e4c5-43ca-b691-91fab22b6380.png">

- 이렇게 다시 열어서 i를 눌러서 수정할 수 있게 모드를 바꾸고 -> 텍스트를 추가해서 입력한 다음, 저장하지 않고 esc 누르고 :q만 이용해서 종료하려고 하면

<img width="436" alt="image" src="https://user-images.githubusercontent.com/95380638/158928547-ee063e72-9475-4aa3-8660-6951830866c2.png">

- vim이 이렇게 저장하고 있는데 중지하는 게 맞는지 경고를 하게 된다.   
    
- **이 때, 응 맞아 그냥 종료해줘 라고 하고 싶을 때는 -> :q! 이렇게 q 다음 !를 붙여줘야지 강제로 종료가 된다. 그러면 실제로 추가한 내용을 저장하지 않고 끄게 된다.**


* * *
- 참고 유튜브 : https://www.youtube.com/watch?v=EL6AQl-e3AQ
