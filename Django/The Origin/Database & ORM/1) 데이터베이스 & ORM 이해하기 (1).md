## 데이터베이스 & ORM 이해하기


### 데이터베이스
- **공유의 목적으로 통합 관리되는 자료의 집합**
- 논리적으로 연관된 하나 이상의 자료 모음으로 내용을 구조화하여 검색과 갱신의 효율화한 것
- **즉, 중복을 없애고 자료를 구조화하여 기억시켜 놓은 자료의 집합체**


- **데이터베이스의 특징**
  - 실시간 접근성 : 사용자의 요구를 즉시 처리 가능
  - 지속적인 변화 : 정확한 값을 유지하려고 삽입, 삭제, 수정 등의 작업을 통해 데이터를 지속적으로 갱신할 수 있음 / 한 번 입력해도 계속 바꿀 수 있음
  - 동시 공유 : 사용자마다 서로 다른 목적으로 사용하므로 동시에 여러 사람이 동일한 데이터에 접근하고 이용할 수 있음
    - 내가 올린 글이 다른 b,c에게도 동일하게 보여져야 한다.
  - 내용에 대한 참조 : 저장한 데이터 레코드의 위치나 주소가 아닌 사용자가 요구하는 데이터의 내용, 즉 데이터 값에 따라 참조할 수 있어야 함.


- **데이터베이스 관리 시스템(DBMS : Database Management System)**
  - 데이터베이스 내에 데이터를 접근할 수 있도록 해주는 소프트웨어
  - 우리가 일반적으로 이걸 DB라고 부른다.
  - 사용자 또는 다른 프로그램의 요구를 처리하고 응답하여 데이터를 사용할 수 있도록 한다.
    - **즉, 데이터베이스는 단순히 자료의 집합체일 뿐이고 / DBMS가 있어야 그 데이터베이스의 데이터를 관리하고 추가,수정,삭제 등의 행위와 권한을 제어하는 등의 기능을 수행할 수 있다.**

- **데이터베이스 관리 시스템의 장단점**
  - 장점
    - 데이터 중복 최소화 
    - 데이터 독립성 확보 가능
    - 데이터 동시 공유 가능
    - 데이터 보안 향상
    - 데이터 무결성을 유지
    - 장애 발생 시 회복 가능
  - 단점
    - **비용이 많이 발생 -> 보통 규모가 커질수록 DBA라고 해서 Database Admin이라고 하는 직무 자체가 존재하게 된다. 또한, 상황에 따라 데이터베이스 관리 시스템 별도의 서버가 필요하다. 그리고 운영인력이 필요하고 라이센스 비용이 발생할 수도 있다.**
      - https://rastalion.me/dba-%EC%9E%85%EC%9E%A5%EC%97%90%EC%84%9C-%EB%B0%94%EB%9D%BC%EB%B3%B4%EB%8A%94-%EB%8D%B0%EC%9D%B4%ED%84%B0%EB%B2%A0%EC%9D%B4%EC%8A%A4-%EC%A7%81%EA%B5%B0-%EC%9D%B4%EC%95%BC%EA%B8%B0/ 관련 글 읽어보기
    - 백업과 회복 방법이 복잡하다. DBMS마다 사용방법이 다 다르기 때문에 학습이 필요.
    - 중앙집중 관리로 취약점이 존재 / 서버가 1대 존재하게 되는데 그 안에 데이터베이스가 다 몰려있게 된다. 그래서 혹시나 여기에 문제가 생기면 모든 데이터베이스에 문제가 생기게 된다.
      - 기업 서버에 랜섬웨어가 걸리게 되면 엄청난 피해를 가져올 수 있다.



- **데이터베이스 관리 시스템의 기능**
  - 정의 : 모든 응용 프로그램들이 요구하는 데이터 구조를 지원하기 위해 데이터베이스에 저장될 데이터의 형(Type)과 구조에 대한 정의, 이용방식, 제약 조건등을 명시하는 기능.
    - 어떤 데이터가 숫자인지 문자인지, 있어야 하는지 없어도 되는지 등
  - 조작 : 데이터 검색, 갱신, 삽입, 삭제 등을 체계적으로 처리하기 위해 사용자와 데이터베이스 사이의 인터페이스 수단을 제공하는 기능
  - 제어 : 데이터의 무결성이 유지되도록 제어 


### 데이터베이스 관리 시스템의 종류
- PostgreSQL, MySQL, MariaDB, ORACLE, SQLite
- 이러한 관리 시스템은 데이터베이스에 있는 데이터에 접근하기 위한 소프트웨어일 뿐이다. 프로그래밍 언어와 프레임워크가 다양하듯이 이 DBMS도 굉장히 다양하게 존재한다. 그래서 상황에 맞게 사용하는 것이 좋다.
  - Oracle : 대기업에서 주로 사용되는 점유율 1위인 유료 데이터베이스 시스템. 라이센스 비용이 굉장히 크다. 인력도 많이 필요하다.
  - SQLite : 서버가 아닌 응용프로그램에 넣어 사용하는 비교적 가벼운 데이터베이스 시스템. 소규모 사무실이나 혼자 프로젝트할 때 사용됨.
  - MySQL : 세계에서 가장 많이 쓰이는 오픈소스 관계형 데이터베이스 시스템. 오픈소스이니까 무료이다. 오라클에서 인수를 해서 같이 회사에서 소유를 하고 있음.
  - PostgreSQL : SQL 언어를 사용하는 오픈소스 객체 관계형 데이터베이스 시스템
- DBMS 사용 순위는 https://db-engines.com/en/ranking 여기서 확인 가능하다. Microsoft SQL server는 MS-SQL 이라고 하는데, 마이크로소프트에서 만든 데이터베이스이다. 
  - **지금 우리가 배우는 건, RDBS(Relational Database Management System)라고해서 --> 관계형 데이터베이스를 학습하게 된다.**
  - **나중에는 NoSQL이라고해서 MongoDB, Redis 와 같은 것들을 추가적으로 학습을 해서 우리가 시스템을 어떻게 효율적으로 구성할 것인지 공부하게 된다.**


### 테이블(Table)이란?
- **테이블이란 건, 데이터베이스가 생긴 형태라고 보면 된다.**
- 사용자테이블이 있다고 가정하면 -> 이 안에 필드로 고유식별자, 아이디, 비밀번호, 이름, 이메일, 활성 여부, 관리자 여부, 스태프 여부, 가입일 등이 있을 수 있다.
  - django에서는 기본적으로 사용자 테이블을 만들어주는데, 그 테이블을 생각해본 것이다. 
  - 고유식별자는 pk, id값으로 기본 키를 갖게된다.
  - **테이블의 이름을 Relation이라고도 하고 / 가로 한 줄의 데이터를 row / 아이디와 같은 하나의 속성을 column 이라고 한다.**


### 테이블 관계
- 테이블은 관계라는 걸 구성하게 되는데, 사용자 테이블과 게시판 테이블이 있다고 가정해보자. 사용자 테이블은 사용자 정보만 갖게되고 / 게시판 테이블은 게시판 정보만 갖게 된다. 
- 게시판 테이블에서도 고유 식별자로 1씩 증가하게 되고, 게시글이나 내용, 생성일이라고 하는 필드가 있다.
  - 그런데 **사용자**라는 필드는 숫자로 되어있는 것을 확인할 수 있다. **해당 숫자는 바로 사용자 테이블의 고유 식별자 번호를 의미한다.**
  - 그래서 게시판 테이블을 조회했을 때, 고유식별자가 1번인 데이터를 조회해달라고 요청하면 --> 사용자라는 필드에는 사용자 테이블 고유식별자값의 번호가 들어가게 된다.
  - **그래서 게시판 고유식별자 1번 데이터를 조회하고 사용자 1번으로 가서 --> 사용자 테이블에서 고유식별자 1번인 데이터를 조회해서 이름을 가져올 수 있다. 즉, 내가 필요한 게시판 테이블에서 데이터를 조회하고 그 중에 관계형성이 되어있는 다른 테이블의 데이터를 조회할 때는 id값을 가지고서 데이터를 조회할 수 있다.**
    - **이렇게 id값을 사용하는 이유는 중복을 최소화하기 위한 목적이 있다. 그래서 연관성이 있는 테이블끼리 서로 참조하게 만드는 것이다.**


### SQL(구조적 질의 언어, Structured Query Language)
- **데이터베이스, DBMS도 따로 언어가 있는데 그게 바로 SQL이라고 한다.**
- DDL : Data Definition Language로 데이터 정의 언어이다. 각 릴레이션을 정의하기 위해 사용하는 언어이다. CREATE, ALTER, DROP... 즉, 테이블을 생성하거나 수정, 삭제하기 위한 언어라고 보면 된다.
- DML : Data Manipulation Language로 데이터 조작언어이다. 데이터를 추가,수정,삭제하기 위한 - 데이터 관리를 위한 언어이다. SELECT, INSERT, UPDATE... 즉, 하나하나 데이터 - row들을 넣거나 수정, 조회하는 언어이다.
- DCL : Data Control Language로 데이터 제어 언어이다. 사용자 관리 및 사용자별로 릴레이션 또는 데이터를 관리하고 접근하는 권한을 다루기 위한 언어이다. GRANT, REVOKE... 즉, 사용자가 데이터를 요구했을 때 그 권한들을 나누기 위해 필요한 언어이다.
