## 식당 예약 사이트 설계 및 모델링 예시
- 식당을 예약하고 후기를 남길 수 있는 사이트를 만들어보자.
  - 로그인을 하지 않았을 경우에는 첫 페이지로 추천 식당과 최근 등록된 식당, 인기있는 식당을 보여주기. 식당 1개를 클릭하면 식당의 주소가 이미지들을 표시. 하단에는 후기들을 목록으로 표시. 로그인과 회원가입도 가능하게 구성. 로그인은 소셜 로그인으로 구글 등을 지원해주기.
  - 로그인을 했다면, 식당 상세화면에서도 예약이 가능하고 예약화면에서 원하는 시간을 선택하면 결제창이 열리고 결제가 진행되게끔 한다. 결제까지 마무리가 되면 내 예약화면에서 본인의 예약현황을 볼 수 있게 하기. 로그인 시 접근가능한 메뉴인 마이페이지에서는, 예약 내역과 후기 목록을 볼 수가 있고 여기서 예약 취소, 후기 생성 및 수정과 삭제도 가능하게끔 하기. + 추가로 관리자 권한을 가진 계정으로 로그인을 한다면 전체 등록된 식당의 목록을 볼 수 있고 식당을 새로 추가하거나 삭제, 수정을 할 수 있다.

- **모델링 해보기**
  - 일단 django가 기본적으로 제공하는 User 모델의 계정이 있다. django의 기본 User 모델을 사용해서 형제 계정을 만들것이다. 그리고 django의 all-auth라는 것을 활용해서 SNS 계정을 구현할 예정이다. 
  - **유저 관련 모델** : 그리고 사용자의 프로필 모델을 구성해서 닉네임이나 사진 등을 받는다. 그리고 내가 이메일로 가입을 했다면 이메일에 대한 인증 정보들을 담은 모델도 구현해야 한다.
  - **식당 관련 모델** : 카테고리(이름, 생성일) / 식당(소속 카테고리, 이름, 대표이미지, 주소, 전화번호, 위도, 경도, 등록일, 수정일, 메뉴 정보, 설명) / 식당이미지(식당 FK, 이미지) / 추천식당(식당 FK, 정렬순서, 등록일) 이렇게 4개의 모델로 구현이 될 예정이다. 나중에는 식당 운영자를 위해서 해당 권한을 명시하는 추가적인 모델을 구현할 예정이다.(식당 FK, 유저 FK, 등록일)
  - **예약 관련 모델** : 식당 예약 시간 슬롯(요일 별)(식당 FK, 요일, 시간, 예약 가능 수, 예약금액, 등록일) / 예약(유저 FK, 식당 FK, 예약 시간 슬롯 FK, 주문번호, PG사 일련번호, 결제수단, 결제 상태, 예약금액, 생성시각, 결제시각, 취소시각, 예약자명, 예약자 전화번호, 예약자 코멘트) / 결제내역(예약 FK, 처리 금액, 처리 시각) / 후기(유저 FK, 식당 FK, 예약 FK, 코멘트, 평점, 등록일) 이렇게 4개의 모델로 나눠지게 된다.

- **이메일 인증 과정**
  - 유저 기본 계정 정보는 기본 User 모델을 그대로 사용하기. 프로필 정보는 별도로 만들어서 관리자 여부도 같이 표시할 예정.
  - 이메일로 가입했을 경우에는 이메일 인증도 하게 할 것이다. 이메일 인증 시도마다 이메일로 발송될 고유한 링크를 생성하고 이를 기억하기 위해서 이메일 인증 정보를 위한 모델도 만들어둔다. 그리고나서 사용자 프로필에서 계정의 인증 여부를 False로 해두었다가 가입한 이메일로 고유한 링크를 전송해서 사용자가 이메일로 로그인한 후에 그 링크를 눌러야지 인증 여부를 True로 바꾸고 인증정보의 완료 시각을 저장한다. 
    - 가입완료 -> 이메일 + 검증 문자열 -> 이메일 인증(링크) -> 검증 문자열 -> 검증 페이지
    - 이렇게 가입이 완료된 시점에 바로 검증이 끝나는 것이 아니라, 가입이 완료가 되면 그 시점에 메일을 하나 보내서 거기에 검증문자를 합친 어떠한 링크를 생성한다. 그래서 그 링크가 담긴 이메일이 발송이 되어 사용자가 그걸 받아보고, 거기에 담긴 링크를 클릭하면 -> 우리 django의 특정 페이지로 이동해서 우리가 query parameter로 고유한 문자를 받아서 그 검증한 값이 사용자에 저장된 검증 키랑 일치하면 -> 그 때서야 인증과정이 끝나는 것이다. 
