## 예약 내역 구현
- ListView를 활용해서 예약 내역을 구현해보기. 
- 식당명과 주소, 예약일자, 가격, 예약번호, 상태, 결제시각, 취소 버튼까지 필요할 것이다. 여기서 중요한 점은 READY와 FAIDED 상태는 제외하고 조회를 해야한다.
- 강의 자료 중, pagination_tags.py을 가져와서 templatetags 디렉터리에 넣어주자. 그리고 list.html도 가져와서 templates 디렉터리 내부에 history라는 디렉터리를 만들고, 그 안에 넣어준다.

- 먼저 list.html를 보면, 

```html
{% extends "common.html" %}
{% load pagination_tags %}
{% load booking_tags %}
{% load humanize %}

{% block title %}예약 내역{% endblock %}

{% block content %}

<div class="row g-4 mt-2">
    <div class="col-12 list-group">
        {% for item in object_list %}
        <div class="list-group-item list-group-item-action">
            <span class="badge badge-primary">{{ item.status|convert_status_korean }}</span><br>
            예약번호: {{ item.order_number }}<br>
            예약일자: {{ item.seat.datetime|date:'Y년 m월 d일 H시 i분' }}<br>
            식당: {{ item.restaurant.name }}<br>
            주소: {{ item.restaurant.address }}<br>
            결제시각: {{ item.paid_at|date:'Y년 m월 d일 H시 i분' }}<br>
            결제금액: {{ item.price|floatformat:0|intcomma }}원<br>

            {% if item.status == 'PAID' %}
            <div class="mt-4 float-right">
                <a href="{% url 'booking-cancel' item.id %}">
                    <button class="btn btn-danger">예약 취소</button>
                </a>
                {% if item|is_available_review %}
                <a href="{% url 'review-create' item.id %}">
                    <button class="btn btn-info">리뷰 작성</button>
                </a>
                {% endif %}
            </div>
            {% endif %}
        </div>
        {% endfor %}
    </div>
</div>


<div class="row mt-4">
    <nav class="col-12">
        <ul class="pagination justify-content-center">
            {% if page_obj.has_previous %}
            <li class="page-item">
                <a class="page-link"
                   href="?page={{ page_obj.previous_page_number }}">이전</a>
            </li>
            {% endif %}

            {% for page in page_obj|slice_visible_pages %}
            {% if page_obj.number == page %}
            <li class="page-item active">
                {% else %}
            <li class="page-item">
                {% endif %}
                <a class="page-link" href="?page={{ page }}">
                    {{ page }}
                </a>
            </li>

            {% endfor %}

            {% if page_obj.has_next %}
            <li class="page-item">
                <a class="page-link"
                   href="?page={{ page_obj.next_page_number }}">다음</a>
            </li>
            {% endif %}
        </ul>
    </nav>
</div>
{% endblock %}
```

- 예약 내역을 출력하는 template이다. 페이징된 object_list 변수를 가지고 와서(ListView에서만 사용가능한 변수이름) for문을 사용하여 내역을 띄운다. 
- convert_status_korean 이라는 필터는, booking_tags 곳에다가 메소드로 우리가 새롭게 만들 것이다. 그래서 templatetags 디렉터리 내부에 booking_tags.py라는 파일을 만든다. 
  - 이 필터를 사용하는 이유는, status가 PAID / FAILED / READY 이런식으로 영어로 오기 때문에 이걸 그대로 사용자에게 보여주기에는 좀 그러니까 이걸 한글로 바꿔주는 역할을 하는 tag를 만드는 것이다. 

- 결제금액은 {{ item.price|floatformat:0|intcomma }} 이렇게 humanize를 사용해서 콤마를 표시하도록 구현했다. 
- 그리고 PAID의 경우에만 예약 취소 버튼이 활성화되도록 했다.
- 또한, 그 아래에는 페이지네이션을 위한 코드가 있다. 이걸 위해 pagination_tags를 load한 것이다. 






