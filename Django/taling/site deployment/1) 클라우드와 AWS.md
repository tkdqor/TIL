## 클라우드와 AWS
- 클라우드 컴퓨팅 환경이 발전하기 이전에는 우리가 서버용으로 사용할 수 있는 컴퓨터를 하나 실제로 구매해서 필요한 운영체제를 설치한 뒤에 적절한 보안 환경을 구축하고 나서야 우리가 구현한 백엔드 코드를 배포하고 세상에 공개할 수 있었다. 
- 이제는 클라우드 컴퓨팅 환경으로 구현된 가상의 컴퓨터를 얻는 방식으로 원하는 시점에 제공받고 서버를 배포할 수 있게 되었다. 대표적인 클라우드 컴퓨팅 환경인 AWS, 즉 아마존 웹서비스를 활용해서 서버 컴퓨터의 역할을 하는 인스턴스를 할당받아 배포를 하려고 한다. 
- 이러한 웹서비스는 구글 GCP, 마이크로소프트 애저 등의 클라우드 플랫폼 등이 있다. 

- **먼저 AWS에서는 제공하는 서버 자원, 서버 컴퓨터의 역할로 EC2 인스턴스라는 게 있다.**
  - 간단한 CPU 개수와 메모리 크기, 디스크 용량과 OS 등을 선택하면 바로 원하는 스펙의 서버 컴퓨터가 생성되고, 직접 접속하고 서버를 띄워볼 수 있다.
  - 이게 가능한 이유는, CPU나 메모리, 하드디스크 같은 다양한 하드웨어 자원들을 거대한 플랫폼으로 연결하고 이 하드웨어들을 가상화라는 기술을 사용해서 필요할 때만 레고 블록처럼 쪼개서 서버 컴퓨터를 생성하는 구조이다. 클라우드라는 명칭은 --> 정해진 하드웨어 자원이 아니라, 하늘의 구름이 합쳐졌다가 흩어졌다가를 반복하듯이 자원을 아주 많이 모아두고 서버 자원을 재조립하는 방법으로 사용할 수 있다는 비유에서 파생된 표현이다. 
  - 클라우드는 컴퓨팅 자원을 제공하는 방법에 따라 3가지로 구분할 수 있다.


### Iaas
- AWS의 EC2 인스턴스와 같이 서버 컴퓨터 자체를, 원하는 스펙으로 조립해서 제공받는 것으로 Infra as a Service의 약자이다. 


### Paas
- Platform as a Service의 약자로 프로그래밍 코드나 프로그램만 업로드하면 적절한 컴퓨팅 자원이 할당되어 실행되는 방식이다.
- 우리는 지금 여기서 사용하진 않겠지만 AWS에서는 lambda 서비스가 여기에 속한다. 


### Saas
- Service as a Service로 고객에게 직접 필요한 기능들을 서비스 형태로 제공하고 내부적으로 알아서 고객에 맞게 컴퓨팅 자원이 조정되는 방식을 의미한다.
- 애플의 아이클라우드나 구글 클라우드도 여기에 속한다. 


### AWS 사이트 접속하기 - EC2
- AWS 관리 콘솔 메뉴에서 EC2 항목을 선택
1) 우측상단에 보면 현재 위치가 뜨는데, 서울로 바꿔줘야 한다. 우리가 사용할 자원의 실제 물리적인 하드웨어 자원의 위치를 정할 수 있는데 서울로 선택해야 한국에 있는 하드웨어 자원에서 서버를 받을 수 있다. 미국을 선택하면 한국에서 접속하기에는 태평양을 건너서 네트워크 회선이 연결되어 있기에 그만큼 느려진다. 
2) 이제 "인스턴스 시작"을 클릭한다. AMI라는 걸 선택하는데, 프리티어 사용 가능을 선택해주면 된다. 그러면 12개월동안 한정된 자원을 무료로 사용할 수 있다. 우리는 이중에 Ubuntu Server 20버전을 사용하자. 선택을 눌러준다. 
3) 다음은 인스턴스 유형이다. 이 부분이 CPU와 메모리, 네트워크 기본 속도를 정한다. 우리는 무료 티어인 "t2 마이크로"를 선택한다. 
4) 다음으로는 인스턴스 세부 구성이다. 세부적인 네트워크 구성이나 기타 세팅등을 설정할 수 있다. 단순 서비스 배포 시에는 크게 당장 쓸 일이 없어 넘어간다.
5) 스토리지 설정은 저장 공간을 정할 수 있다. 지금 8기가로 지정되어 있는데 용량이 클수록 이용료가 올라가기 때문에 지금은 프리 티어 안에 제한 사용량인 8기가로 하자. 
6) 그 다음 태그 추가는 넘기고, 보안그룹을 보자. 외부에서 접속할 수 있는 포트를 지정하고 어떤 방화벽 정책을 설정하는 역할을 한다. 여기서 "새 보안 그룹 생성"을 선택하고 SSH 유형의 위치 무관을 선택해주자. 보안을 생각해서 일단 내 아이피 기준으로만 설정하는 게 좋지만 그렇게 하면 컴퓨터가 아이피가 바뀔때마다 새로 설정해줘야 하기 때문에 위치무관으로 둔다. 
7) 추가로 HTTP, HTTPS도 위치 무관으로 추가해준다. 
8) 그 다음 "사용자 TCP 규칙"을 선택해서 django 런 서버의 기본 포트인 8000번도 위치 무관으로 지정한다. 그리고 검토 및 시작을 눌러 마무리 한다. 
9) 이제 시작하기 버튼을 누르고 키 페어를 설정할 수 있다. "새 키 페어 생성"을 선택하고 파일명을 입력해준다. ex) tc-ssh-keypam 
10) **그리고 다운로드를 누르면 pem파일이 다운로드 된다. 이걸 잘 보관해야 하는데, 우리가 방금 만든 서버 인스턴스에 접속하기 위한 마스터키 역할을 한다고 보면 된다.**
11) 이제 인스턴스 시작을 눌러 서버를 실행시킨다. 


### 리눅스 기반 Ubuntu OS
- **우리가 이렇게 만든 인스턴스는 리눅스 기반의 Ubuntu OS가 설치되어 있다. "Ubuntu는 기본적으로 커맨드 라인 기반 OS"여서 우리가 일반적으로 사용하는 그래픽 UI 기반의 마우스가 있는 UI를 제공하지 않는다.** 
  - 그래서 터미널 창을 통해 명령어를 내리고 설치하고 실행하는 등 그렇게 상호작용을 해야 한다. 그리고 **이런 서버 컴퓨터의 터미널에 접속하기 위한 통신 프로토콜 중에 SSH라는 게 있다.** 
  - 아마존 서버들은 기본적으로 SSH 프로토콜로 접속하도록 되어있다. 
  - 이 SSH 프로토콜로 접속할 때 아마존 인스턴스들은 주기적으로 최고 관리자 권한 접속 시 마스터키로 접속하도록 되어 있는데, 우리가 다운로드받은 팸 파일이 바로 마스터키 역할을 하는 파일이 된다. 
  - 나중에 실무에서는 여러 상황에 따라 보안을 위해 최고 관리자 권한이 아닌 다른 권한으로 접속하는 것도 필요한 경우가 있지만, 지금은 굳이 필요하지 않기 때문에 팸 키를 통해 EC2 인스턴스에 접속하는 방법만 고려하자.



### EC2 인스턴스에 접속하기
- 방금 생성된 인스턴스에 이름을 수정하자. 다른 것과 구분해야 한다. 그래서 인스턴스 상태가 "실행 중"일 때까지 기다려주자.
- **이제 왼쪽 메뉴에서 "네트워크 및 보안" - "탄력적 IP" 라는 게 있다. 인스턴스가 외부 네트워크에 노출되서 우리가 접속할 수 있게 하려면, 접속가능한 아이피를 할당 받아야 하는데 탄력적 IP 메뉴에서 할 수 있다.** 
- **해당 메뉴를 클릭하고 우측 상단에 "탄력적 IP 주소 할당" 버튼을 누르고 그 다음 화면 아래에 "할당" 버튼을 누르면 ==> 새로운 IP가 생성된다.**
- 해당 IP를 체크하고 우측 상단에 "작업"을 눌러서 "탄력적 IP 주소 연결" 버튼을 누르고 아까 생성한 인스턴스를 선택하면 이제 아이피가 연결된다. (이제 우리가 만든 EC2에 IP주소가 할당된 것이다)
- 이것도 구분하기 쉽게 IP 주소의 이름을 수정해주자. 
- 이제 다시 EC2 화면의 우리가 만든 인스턴스를 클릭하면 세부정보에 "퍼블릭 IPv4 주소"가 뜨게 된다. 


