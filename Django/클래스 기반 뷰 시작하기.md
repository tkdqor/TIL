## View
- django에서는 호출가능한 객체


### 함수 기반 뷰 (Function Based View
- View 구현의 기본. 공통기능들은 장식자 문법으로 적용. 

```python
@api_view(['GET'])
@throttle_classes([OncePerDayUserThrottle])
def my_view(request):
    return Response({"message":	"Hello	for	today!"})
```    

- 어떠한 View가 있을 때, 우리가 DRF를 사용한다면 API의 기능들을 위해 해당 View 함수에다가 @api_view(['GET']) 장식자로 꾸며준다. / 그리고 요청 호출 수를 제한하고 싶을 때는, @throttle_classes([OncePerDayUserThrottle]) 이 장식자를 설정한다.



### 클래스 기반 뷰 (Class Based View)
- 클래스 기반 View에서는 공통 기능들을 부모 클래스로 만들어서 상속 문법으로 자식 클래스에게 적용한다.
- 공식문서 https://docs.djangoproject.com/en/3.0/topics/class-based-views/

```python
class MyView(APIView):
    throttle_classes	=	[OncePerDayUserThrottle]
    
    def get(self,	request):
        return Response({"message":	"Hello	for	today!"}) 
```

- MyView는 APIView를 상속받아서 설정.

- 클래스 기반 View는, View 함수를 만들어주는 클래스 / as_view() 클래스 함수를 통해, View 함수를 생성
  - 상속을 통해, 여러 기능들을 믹스인

- 장고 기본 CBV 팩키지 -> django.views.generic에 위치해 있음 
  - https://github.com/django/django/tree/main/django/views/generic -> 여기에서 list.py를 보면, class ListView(MultipleObjectTemplateResponseMixin, BaseListView): 
    라고 해서 우리가 사용해본 클래스가 있다. 그리고 해당 클래스는 BaseListView를 상속받아 구현한 것을 알 수 있다. 해당 클래스의 위쪽에 보면 MultipleObjectTemplateResponseMixin, BaseListView의 
    클래스가 어떻게 정의되어 있는지 알 수 있다.
  - BaseListView 클래스는 어떤 get 요청이 왔을 때, 쿼리셋을 만들어주고 쿼리셋에 데이터가 없는 상황을 허용할지 안할지를 결정해준다. 만약 허용하지 않는다면 Http 404 에러를 발생하겠다고 한다.

- 써드파티 CBV
  - django-braces 라는 라이브러리가 있다. https://django-braces.readthedocs.io/en/latest/


### CBV 컨셉 구현해보기
- 먼저, FBV로 우리가 만약 어떤 앱에서 Post와 Article이라는 모델에 대해서 우리가 detail 함수를 설정한 경우이다.

```python
from django.shortcuts	import get_object_or_404,	render

def post_detail(request,	id):
    post	=	get_object_or_404(Post,	id=id)
    return render(request,	'blog/post_detail.html',	{
        'post':	post,
    })
    
def article_detail(request,	id):
    article	=	get_object_or_404(Article,	id=id)
    return render(request,	'blog/article_detail.html',	{
      'article':	article,
    })
```

- 이 2개의 View 함수는 비슷한 점이 많고 공통적인 부분이 많다.

```python

def post_detail(request: HttpRequest, pk: int) -> HttpResponse:
    post = Post.objects.get(pk=pk)

    return render(request, 'instagram/post_detail.html', {
        'post': post,
    })
```

- 이 예시 코드에서는 Post 모델 테이블에서, pk라는 필드에 url로부터 받은 pk라는 인자를 대입하여 그 pk에 해당하는 객체를 post라는 변수에 담았다.



